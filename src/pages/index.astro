---
import { getCollection } from 'astro:content'
const posts = await getCollection('blog')

// 手動でabout記事を先頭に用意
const aboutPost = {
  slug: "about",
  data: {
    title: "about",
    summary: "このサイトについてのページです"
  }
}

// 「初投稿」記事をpostsから探す
const firstPostSlug = "初投稿"
const firstPost = posts.find((post: { slug: string }) => post.slug === firstPostSlug)

// 初投稿以外の記事
const otherPosts = posts.filter((post: { slug: string }) => post.slug !== firstPostSlug)
---

<html>
  <head>
    <title>記事一覧</title>
    <style>
      /* 省略: CSSはそのままでOK */
    </style>
  </head>
  <body>
    <h1>記事一覧</h1>

    <!-- about記事 -->
    <section class="about-container">
      <a href="/about" class="card">
        <h2>{aboutPost.data.title}</h2>
        <p>{aboutPost.data.summary}</p>
      </a>
    </section>

    <!-- 初投稿記事があれば表示 -->
    {firstPost && (
      <section class="about-container">
        <a href={`/blog/${firstPost.slug}`} class="card">
          <h2>{firstPost.data.title ?? "タイトルなし"}</h2>
          <p>{firstPost.data.summary ?? "記事の概要をここに追加できます。"}</p>
        </a>
      </section>
    )}

    <!-- それ以外の記事を3列グリッドで表示 -->
    <section class="grid-container">
      {otherPosts.map((post: { slug: any; data: { title: any; summary: any } }) => (
        <a href={`/blog/${post.slug}`} class="card">
          <h2>{post.data.title ?? "タイトルなし"}</h2>
          <p>{post.data.summary ?? "記事の概要をここに追加できます。"}</p>
        </a>
      ))}
    </section>
  </body>
</html>
